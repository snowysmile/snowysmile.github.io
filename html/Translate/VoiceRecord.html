<!DOCTYPE html>
<html>
<head>
  <title>Speech Recording</title>
</head>
<body>
  <button id="recordButton">Start Recording</button>
  <textarea id="transcription"></textarea>
  <textarea id="allTranscription"></textarea>

  <script>
    if ('webkitSpeechRecognition' in window) {
      const recognition = new webkitSpeechRecognition();
      recognition.continuous = true;
      recognition.interimResults = true;
      recognition.lang = 'en-US';

      const recordButton = document.getElementById('recordButton');
      const transcription = document.getElementById('transcription');
      const allTranscription = document.getElementById('allTranscription');

      recordButton.addEventListener('click', () => {
        if (recordButton.textContent === 'Start Recording') {
          recognition.start();
          recordButton.textContent = 'Stop Recording';
        } else {
          recognition.stop();
          recordButton.textContent = 'Start Recording';
        }
      });

      recognition.onresult = (event) => {
        let finalTranscript = '';

        for (let i = event.resultIndex; i < event.results.length; ++i) {
          if (event.results[i].isFinal) {
            finalTranscript += event.results[i][0].transcript;
          }
        }

        transcription.value = finalTranscript;
        allTranscription.value += finalTranscript;
      };
    } else {
      console.error('Web Speech API is not supported in this browser.');
    }
  </script>
</body>
</html>
