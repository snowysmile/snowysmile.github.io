<!DOCTYPE html>
<html>
<head>
    <title>Language Detection</title>
</head>
<script type="module">
    // import {franc, francAll} from 'https://esm.sh/franc@6?bundle'
    // console.log(franc("„Å™„Å´„Åì„Çå", {minLength: 1}));
</script>
<body>
  <h1>Language Detection</h1>
  <textarea id="text-input" rows="5" cols="50" placeholder="Enter text to detect language"></textarea>
  <button onclick="detectLanguage()">Detect Language</button>
  <p> Detected Language: <span id="language-result"></span> </p>

  <script>
    async function detectLanguage() {

      const text = document.getElementById('text-input').value;
      const languageResult = document.getElementById('language-result');
      var language = await detectLanguageFromMyServer(text);
      console.log(language);
      languageResult.innerHTML = language;

      // var html = await japaneseExplanationFromMyServer(text);
      // console.log(html);
    }

    async function detectLanguageFromMyServer(text) {
      try {
        // const response = await fetch('https://snsmile.site:3001/detect-language', {
        const response = await fetch('http://localhost:3001/detect-language', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            text: text
          })
        })
        const data = await response.json();
        return data.language;
      } catch (error) {
       console.error('Error:', error);
       return text + "üåêüö®";
      }
    }

   async function japaneseExplanationFromMyServer(text) {
     try {
        // const response = await fetch('https://snsmile.site:3001/furigana', {
        const response = await fetch('http://localhost:3001/furigana', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          text: text
        })
       })
       const data = await response.json();
       return data.result;
     } catch (error) {
       console.error('Error:', error);
       return text + "üåêüö®";
     }
   }
  </script>
</body>
</html>
