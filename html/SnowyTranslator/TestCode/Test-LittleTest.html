<!DOCTYPE html>
<html>
<head>
    <title>Language Detection</title>
</head>
<script type="module">
    import {franc, francAll} from 'https://esm.sh/franc@6?bundle'
    console.log(franc("這是什麼", {minLength: 3}));
    console.log(franc("这是什么", {minLength: 3}));
    console.log(franc("何これ", {minLength: 3}));
    console.log(franc("what is it", {minLength: 3}));
</script>
<body>
    <h1>Language Detection</h1>
    <textarea id="text-input" rows="5" cols="50" placeholder="Enter text to detect language"></textarea>
    <button onclick="detectLanguage()">Detect Language</button>
    <p>Detected Language: <span id="language-result"></span></p>

    <script>
        function detectLanguage() {
            const text = document.getElementById('text-input').value;
            const languageResult = document.getElementById('language-result');
            languageResult.textContent = franc(text, {minLength: 3})
            return;

            // Make a POST request to the Flask server
            fetch('http://localhost:3001/detect-language', { // Update the URL accordingly
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ text: text })
            })
            .then(response => response.json())
            .then(data => {
                if (data.language) {
                    languageResult.textContent = data.language;
                } else {
                    languageResult.textContent = 'Language detection failed';
                }
            })
            .catch(error => {
                const languageResult = document.getElementById('language-result');
                languageResult.textContent = 'Error: ' + error.message;
            });
        }
    </script>
</body>
</html>
